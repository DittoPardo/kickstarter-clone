"use strict";function removeComment(e){$.ajax({type:"POST",url:"/delete-comment",data:{commentId:window.event.target.id,pathname:window.location.pathname},success:function(e,o,n){window.location.pathname=e.redirect}})}var commentSkipNum=0;window.location.pathname.indexOf("projects/")>=0&&document.getElementById("loadMoreComments").addEventListener("click",function(e){e.preventDefault(),commentSkipNum++,$.ajax({type:"GET",data:{commentSkipNum:commentSkipNum},url:window.location.pathname,success:function(e){e?(console.log("*** DATA \n",e),$("#commentList").append(e)):(console.log("NO DATA"),$("#loadMoreComments").removeClass("btn-info").addClass("disabled").text("No More"))},error:function(e){console.log("Error \n",e)}})},!1);
function getDayTilEnd(e){var t=new Date(e).getTime()-(new Date).getTime();if(0>=t)return"0 seconds";var n=t/864e5;if(n>=2)return parseInt(n)+" days";if(1>n){var r=t/36e5;return 1>r?parseInt(t/6e4)+" minutes":r>=2?parseInt(r)+" hours":"1 hour"}return"1 day"}function resetInnerHTML(e){return document.getElementById(e).innerHTML=""}function checkStrLength(e,t,n,r,a){var u="";if(a===!0){if(!document.getElementById(r).value)return t+" required";document.getElementById(r).value.trim().length<1&&(u+=t+" required")}var l=document.getElementById(r).value.trim();return l.length>n&&(u+=t+" should be shorter than "+n),u.length>0?(e&&e.preventDefault(),u):null}function checkEmail(e,t){var n=document.getElementById(t).value.trim(),r="";return n.match(/^\S+@\S+\.\S+$/)||(r+="Email must be in valid format"),r.length>0?(e&&e.preventDefault(),r):null}function checkEmailAgain(e,t,n){var r="",a=document.getElementById(t).value.trim(),u=document.getElementById(n).value.trim();return a!==u&&(r="Email confirmation doesn't match Email"),r.length>0?(e&&e.preventDefault(),r):null}function checkPassword(e,t){var n=document.getElementById(t).value.trim(),r=[];return n.length>30&&r.push("Password must be less than 31 chars"),n.length<8&&r.push("Password must be longer than 7 chars"),n.match(/\d/g)||r.push("Password needs a number"),n.match(/[a-z]/g)||r.push("Password needs a lowercase letter"),n.match(/[A-Z]/g)||r.push("Password needs an uppercase letter"),r.length>0?(e&&e.preventDefault(),r):null}function checkPasswordAgain(e,t,n){var r="",a=document.getElementById(t).value.trim(),u=document.getElementById(n).value.trim();return a!==u&&(r="Password confirmation doesn't match Password"),r.length>0?(e&&e.preventDefault(),r):null}$("#flash-box").alert(),window.setTimeout(function(){$("#flash-box").alert("close")},4e3),$(function(){$("#datetimepicker1").datetimepicker()}),$(function(){$("#datetimepicker2").datetimepicker()});var dateList=$(".date-item");!function(){$(".date-item").each(function(e,t){t.innerHTML=moment(new Date(t.innerHTML)).format("MMM Do, YYYY")})}();
"use strict";"/profile/edit"===window.location.pathname&&document.getElementById("profileUpdateForm").addEventListener("submit",function(e){resetInnerHTML("profile-errors-list");var t=[],r=checkStrLength(e,"Name",50,"profileName",!0),o=checkStrLength(e,"Biography",300,"bio",!1),l=checkStrLength(e,"Webiste",120,"profileWebsite",!1),n=checkStrLength(e,"Location",40,"profileLocation",!1);null!==r&&t.push(r),null!==o&&t.push(o),null!==l&&t.push(l),null!==n&&(t=t.concat(n)),t.length>0&&(document.getElementById("profile-errors-box").className+=" show",window.scrollTo(0,0));for(var i=document.getElementById("profile-errors-list"),a=0;t.length>a;a++){var s=document.createElement("li"),d=document.createTextNode(t[a]);s.appendChild(d),i.appendChild(s)}},!1),"/profile/edit"===window.location.pathname&&document.getElementById("emailUpdateForm").addEventListener("submit",function(e){resetInnerHTML("profile-email-errors-list");var t=[],r=checkEmail(e,"profileEmail"),o=checkEmailAgain(e,"profileEmail","profileEmailagain");null!==r&&t.push(r),null!==o&&t.push(o),t.length>0&&(document.getElementById("profile-email-errors-box").className+=" show");for(var l=document.getElementById("profile-email-errors-list"),n=0;t.length>n;n++){var i=document.createElement("li"),a=document.createTextNode(t[n]);i.appendChild(a),l.appendChild(i)}},!1),"/profile/edit"===window.location.pathname&&document.getElementById("passwordUpdateForm").addEventListener("submit",function(e){resetInnerHTML("profile-password-errors-list");var t=[],r=checkStrLength(e,"Current Password",25,"profileCurrentPassword",!0),o=checkPassword(e,"profileNewPassword"),l=checkPasswordAgain(e,"profileNewPassword","profilePasswordagain");null!==r&&t.push(r),null!==o&&(t=t.concat(o)),null!==l&&t.push(l),t.length>0&&(document.getElementById("profile-password-errors-box").className+=" show");for(var n=document.getElementById("profile-password-errors-list"),i=0;t.length>i;i++){var a=document.createElement("li"),s=document.createTextNode(t[i]);a.appendChild(s),n.appendChild(a)}},!1);
"use strict";var skipNum=0;("/projects"===window.location.pathname||window.location.pathname.indexOf("categories")>=0)&&document.getElementById("loadMoreProjects").addEventListener("click",function(o){o.preventDefault(),skipNum++,$.ajax({type:"GET",data:{skipNum:skipNum},url:"/projects",success:function(o){o?(console.log("*** DATA \n",o),$("#projects-box").append(o)):(console.log("NO DATA"),$("#loadMoreProjects").removeClass("btn-info").addClass("disabled").text("No More"))},error:function(o){console.log("Error \n",o)}})},!1);
"use strict";function checkCoverPhoto(e){var n=document.getElementById("cover_photo").value,t="";return""===n&&(t+="Cover photo is rquired."),t.length>0?(e&&e.preventDefault(),t):null}function checkFundingGoal(e){var n=document.getElementById("funding_goal"),t="";return n.value?(isNaN(parseInt(n.value))===!0&&(t+="Funding Goal must be number ($)"),parseInt(n.value)<=0&&(t+="Funding Goal must be greater than 0.")):t+="Funding Goal is required",t.length>0?(e&&e.preventDefault(),t):null}function checkDate(e,n,t){var o=document.getElementById(n).value,r="";return o?new Date(o)<new Date&&(r+=t+" date must be later than today."):r+=t+" is required.",r.length>0?(e&&e.preventDefault(),r):null}function checkLocation(e){var n=document.getElementById("location"),t="";if(!n.value)return"Loaction name is required";var o=n.value.trim();return isNaN(parseInt(o))===!1&&(t+="Location name cannot be number"),o.length<1&&(t+="Location is required."),o.length>30&&(t+="Location name is too long."),t.length>0?(e&&e.preventDefault(),t):null}"/create-project"===window.location.pathname&&document.getElementById("project-form").addEventListener("submit",function(e){resetInnerHTML("project-errors-list");var n=[],t=checkStrLength(e,"Project Name",80,"project_name"),o=checkStrLength(e,"Short Description",140,"short_description"),r=checkStrLength(e,"Long Description",400,"long_description"),l=checkCoverPhoto(e),u=checkFundingGoal(e),a=checkDate(e,"funding_end_date","Funding End Date"),c=checkLocation(e);null!==t&&n.push(t),null!==o&&n.push(o),null!==r&&n.push(r),null!==l&&n.push(l),null!==u&&n.push(u),null!==a&&n.push(a),null!==c&&n.push(c),n.length>0&&(document.getElementById("project-errors-box").className+=" show",window.scrollTo(0,0));for(var i=document.getElementById("project-errors-list"),d=0;n.length>d;d++){var h=document.createElement("li"),s=document.createTextNode(n[d]);h.appendChild(s),i.appendChild(h)}},!1);
"use strict";var pageNum=1;"/search"===window.location.pathname&&document.getElementById("loadMoreResult").addEventListener("click",function(e){e.preventDefault(),pageNum++,$.ajax({type:"POST",data:{q:$("#search-query").text(),page:pageNum},url:"/search?q="+$("#search-query").text()+"&page="+pageNum,success:function(e){e?(console.log("*** DATA \n",e),history.pushState(null,null,"/search?q="+$("#search-query").text()+"&page="+pageNum),$("#project-result-box").append(e)):(console.log("NO DATA"),$("#loadMoreResult").removeClass("btn-info").addClass("disabled").text("No More"))},error:function(e){console.log("Error \n",e)}})},!1);
"use strict";"/signup"===window.location.pathname&&document.getElementById("signup-form").addEventListener("submit",function(e){resetInnerHTML("signup-errors-list");var n=[],s=checkStrLength(e,"Name",50,"signupName",!0),i=checkEmail(e,"signupEmail"),a=checkEmailAgain(e,"signupEmail","signupEmailagain"),t=checkPassword(e,"signupPassword"),l=checkPasswordAgain(e,"signupPassword","signupPasswordagain");null!==s&&n.push(s),null!==i&&n.push(i),null!==a&&n.push(a),null!==t&&(n=n.concat(t)),null!==l&&n.push(l),n.length>0&&(document.getElementById("signup-errors-box").className+=" show",window.scrollTo(0,0));for(var u=document.getElementById("signup-errors-list"),r=0;n.length>r;r++){var o=document.createElement("li"),c=document.createTextNode(n[r]);o.appendChild(c),u.appendChild(o)}},!1);
function stripeResponseHandler(e,r){var n=$("#payment-form");if(r.error)console.log("*** stripe error *** \n",r.error),n.find(".payment-errors").text(r.error.message),n.find(".payment-errors").addClass("alert alert-danger stripe-error"),n.find("button").prop("disabled",!1);else{console.log("*** stripe response *** \n",r);var t=r.id;n.append($('<input type="hidden" name="stripeToken" />').val(t)),n.get(0).submit()}}Stripe.setPublishableKey("pk_test_Xn5nWxjEXpqZ4SJQQs1cyB2K"),jQuery(function(e){e("#payment-form").submit(function(r){console.log("Submitted \n",r);var n=e(this);return n.find("button").prop("disabled",!0),Stripe.card.createToken(n,stripeResponseHandler),!1})});